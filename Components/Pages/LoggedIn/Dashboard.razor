@page "/"
@page "/dashboard"
@inject ISnackbar Snackbar

<AuthorizeView>
    <Authorized>
        <PageTitle>Dashboard</PageTitle>

        <MudGrid>
            <MudItem xs="12" sm="6" md="4" lg="3">
                <MudCard>
                    <MudCardHeader>
                        <MudText Typo="Typo.h6">Welkom @_username!</MudText>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudText Typo="Typo.body1">Dit is het dashboard voor medewerkers van schoenenbedrijf Gimpies!</MudText>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </Authorized>

    <NotAuthorized>
        <Login />
    </NotAuthorized>
</AuthorizeView>

@code {
    [CascadingParameter]
    private Task<AuthenticationState> authStateTask { get; set; } = default!;

    private string? _username;

    protected override async Task OnInitializedAsync()
    {
        var authState = await authStateTask;
        var identity = authState.User.Identity;

        if (identity is not null && identity.IsAuthenticated)
            _username = identity.Name;
    }
}