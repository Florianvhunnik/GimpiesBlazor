@page "/error/{ErrorCode:int}"

@using GimpiesBlazor.Handlers
@using GimpiesBlazor.Managers

<PageTitle>Error</PageTitle>

<MudGrid Justify="Justify.Center" AlignItems="AlignItems.Center" Style="height: 100vh;">
    <MudItem xs="12" sm="8" md="6" lg="4">
        <MudPaper Class="pa-4" Style="text-align: center;">
            <MudText Typo="Typo.h5">Er is een fout opgetreden (@ErrorCode)</MudText>
            <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Class="mt-4">
                <MudText>@_errorMessage</MudText>
            </MudAlert>
            
            @if (SessionManager.IsLoggedIn)
            {
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" Href="/dashboard">
                    Dashboard
                </MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" Href="/logout">
                    Uitloggen
                </MudButton>
            }
            else
            {
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" Href="/login">
                    Inloggen
                </MudButton>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" Href="/registreren">
                    Registreren
                </MudButton>
            }
        </MudPaper>
    </MudItem>
</MudGrid>


@code {
    [Parameter]
    public int ErrorCode { get; set; }
    private string? _errorMessage;

    protected override void OnInitialized()
    {
        _errorMessage = ErrorCode > 10 ? ErrorHandler.GetErrorMessage(ErrorCode) :
            ErrorHandler.GetErrorMessage(ErrorHandler.GetProgramError(ErrorCode));
    }
}